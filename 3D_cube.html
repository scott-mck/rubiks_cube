<!DOCTYPE html>
<html lang="en">
	<head>
		<title>three.js webgl - geometry - cube</title>
		<meta charset="utf-8">
		<style>
			body {
				margin: 0px;
				background-color: #000000;
				overflow: hidden;
			}
		</style>
	</head>
	<body>
		<h1 style="color: white; margin: 30px; font-size: 64px; position: absolute;">
			RUBIK'S CUBE<br>
			<small>Press Enter to solve</small>
		</h1>

		<h2 style="color: white; margin: 30px; font-size: 48px; position: absolute; margin-top: 400px;">
			<small class="timer">0.00</small>
		</h2>

		<script src="./jquery-2.1.4.min.js"></script>
		<script src="./three.min.js"></script>
		<script type="application/javascript" src="3D_cube.js"></script>
		<script type="application/javascript" src="cube.js"></script>
		<script type="application/javascript" src="3D_game.js"></script>
		<script type="application/javascript" src="3D_event_handler.js"></script>

		<script>
			var camera, scene, renderer;
			var mesh;
			var cubes = [];
			var startTime = new Date();

			init();
			animate();

			function init () {
				//setup scene
				renderer = new THREE.WebGLRenderer();
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );
				camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );
				camera.position.z = 600;
				scene = new THREE.Scene();
				group = new THREE.Object3D();
				// rotatingFace = new THREE.Object3D();

				//Make individual cube geometry
        for (var j = 0; j < 9; j++) {
  				var geometry = new THREE.BoxGeometry( 100, 100, 100 );

					//Color each individual cube:
					//Color right face RED
					geometry.faces[0].color.setRGB(255/255,0/255,0/255);
					geometry.faces[1].color.setRGB(255/255,0/255,0/255);
					//Color left face ORANGE
					geometry.faces[2].color.setRGB(255/255,101/255,0/255);
					geometry.faces[3].color.setRGB(255/255,101/255,0/255);
					//Color top face YELLOW
					geometry.faces[4].color.setRGB(255/255,255/255,0/255);
					geometry.faces[5].color.setRGB(255/255,255/255,0/255);
					//Color down face WHITE
					geometry.faces[6].color.setRGB(255/255,255/255,255/255);
					geometry.faces[7].color.setRGB(255/255,255/255,255/255);
					//Color front face BLUE
					geometry.faces[8].color.setRGB(0/255,0/255,255/255);
					geometry.faces[9].color.setRGB(0/255,0/255,255/255);
					//Color back face GREEN
					geometry.faces[10].color.setRGB(0/255,255/255,0/255);
					geometry.faces[11].color.setRGB(0/255,255/255,0/255);

					//Create 3 mini-cubes and position along z-axis
					for (var k = 0; k < 3; k++) {
	          var material = new THREE.MeshBasicMaterial({ color: 0xffffff, vertexColors: THREE.FaceColors } );
	  				mesh = new THREE.Mesh( geometry, material );
	          mesh.position.set(103 -103 * ~~(j / 3), 103 -103 * (j % 3), 103 - 103 * k);

						//Create mini-cube border
						var helper = new THREE.EdgesHelper( mesh, 0x000000 );
						helper.material.linewidth = 10;

						cubes.push(mesh);
						scene.add(mesh);
						scene.add(helper);
					}
        }

				camera.position.x += 250;
				camera.position.y += 300;
				camera.position.z -= 100;
				camera.lookAt(cubes[13].position); //look at middle of Rubik's Cube

				var rubiksCube = new Game.Cube(scene, camera, cubes);
				var eventHandler = new Game.EventHandler(rubiksCube, 'game');

				window.addEventListener( 'resize', onWindowResize, false );
			}

			function onWindowResize() {
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize( window.innerWidth, window.innerHeight );
			}

			function animate() {
				requestAnimationFrame( animate );
				renderer.render( scene, camera );
			}
		</script>
	</body>
</html>
